<!-- /login/social-complete.html -->
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>소셜 로그인 완료</title>
</head>
<body>
  <p>소셜 로그인 처리 중...</p>
  <script type="module">
    const HOME = "/home/home.html";                         // Vite base를 안 쓴다면 절대경로로
    const LOGIN = "/login/login.html";

    async function go() {
      try {
        const r = await fetch("/users/profile/", {
          method: "GET",
          credentials: "include",
          headers: { "Accept": "application/json" }
        });
        if (r.ok) {
          location.replace(HOME);                           // 세션 OK → 홈으로
        } else {
          location.replace(`${LOGIN}?social=fail`);         // 세션 없음 → 로그인으로
        }
      } catch {
        location.replace(`${LOGIN}?social=fail`);
      }
    }
    go();
  </script>
</body>
</html>
